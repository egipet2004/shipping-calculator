Multi-Carrier Shipping Rate Calculator

Это веб-приложение для расчета стоимости доставки посылок различными курьерскими службами (FedEx, UPS, USPS и др.). Проект строился с упором на строгую типизацию, архитектурные паттерны и доступность.



STACK 

Framework: Next.js 16 (App Router)
Language: TypeScript 5+ (Strict Mode)
Styling: Tailwind CSS 4
Testing: Vitest
Validation: Zod (для серверной части) + Кастомная логика (для клиента)
State Persistence: LocalStorage API



Architecture and Structure

  - 1. Доменная модель (src/types/domain.ts)
  Разработана строгая система типов TypeScript, описывающая основные сущности приложения:

  -RateRequest — полный объект запроса (адреса, посылка, опции).
  -AddressInformation — структура почтового адреса.
  -Package — параметры груза (размеры, вес, тип упаковки).
  -ShippingOptions — дополнительные услуги (страховка, хрупкий груз, доставка в выходные).

  - 2. Запланированные паттерны (Design Patterns)

  -Strategy Pattern (Стратегия): Для переключения алгоритмов расчета разных перевозчиков (FedEx, UPS).
  -Factory Method (Фабричный метод): Для создания экземпляров сервисов доставки.
  -Decorator (Декоратор): Для динамического добавления наценок к стоимости (страховка, упаковка).
  -Adapter (Адаптер): Для унификации ответов от внешних API курьерских служб.

  - 3. Конфигурация
  Реализован Singleton Pattern для управления конфигурацией (src/config/carrier-config.ts).




Form fuctional and UX 

  - 1. Многошаговая форма (Multi-step Form)
  Реализован процесс оформления из 4 шагов с сохранением прогресса:

  -Package Details: Ввод размеров (дюймы/см) и веса (lbs/kg).
  -Route: Адреса отправления (Origin) и получения (Destination).
  -Options: Выбор скорости доставки и дополнительных услуг.
  -Review: Итоговая сводка данных перед расчетом.

  Кастомный хук usePackageForm управляет состоянием, переключением шагов и агрегацией данных.

  - 2. Система валидации 
  Для проверки данных применен паттерн Chain of Responsibility. Это позволяет гибко настраивать и комбинировать правила проверки.

  Валидаторы:

  -RequiredFieldsValidator — проверка наличия обязательных полей.
  -PostalCodeFormatValidator — проверка формата ZIP-кода (специфично для США).
  -DimensionsValidator — проверка на корректность размеров и лимиты перевозчиков (макс. 165 дюймов в обхвате).
  -WeightValidator — проверка веса (лимит 150 lbs).

  Логика: При нажатии "Next Step" запускается цепочка. Если один из валидаторов находит ошибку, процесс останавливается, и ошибка возвращается в UI.

  - 3. Расчеты в реальном времени
  Billable Weight: Хук useDimensionalWeight автоматически рассчитывает объемный вес посылки и подсказывает пользователю, какой вес будет использован для тарификации (фактический или объемный).

  - 4. Доступность (Accessibility / WCAG 2.1 AA)
  Форма полностью адаптирована для пользователей с ограниченными возможностями:

  Управление фокусом: При возникновении ошибки фокус ввода автоматически переносится на первое невалидное поле.

  ARIA-атрибуты: Используются aria-required, aria-invalid, aria-describedby и role="alert" для корректной работы скринридеров (Screen Readers).

  Семантический HTML: Использование <fieldset> и <legend> для группировки связанных полей.

  Навигация с клавиатуры: Полная поддержка управления формой без мыши (включая кастомные радио-кнопки).

  - 5. Сохранение данных (Persistence)
  Реализована защита от потери данных при случайной перезагрузке страницы:

  Auto-save: Данные сохраняются в localStorage автоматически (с задержкой/debounce, чтобы не нагружать браузер).